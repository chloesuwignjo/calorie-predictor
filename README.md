# Steps to Culinary Perfection

by Chloe Suwignjo & Irina Vardapetyan

# Introduction

With the advent of health influences and the surge of healthy living trends, dietary breakdowns (in terms of calories, protein content, etc.) has become exponentially more prevalent in our society and social media. However, many individuals stray away from healthy living because of time constraints and busy lifestyle practices. Many resort to unhealthier options because they simply "do not have time" or because the "recipes are too complicated". In order to break down whether this observation amongst busy people is true, we decided to investigate the length of a recipe from its **number of steps**.

To explore this, we use a dataset of recipes and ratings from [food.com](https://food.com), which was originally scraped and obtained by Majumder, et al for a research paper titled [Generating Personalized Recipes from Historical User Preferences](https://cseweb.ucsd.edu/~jmcauley/pdfs/emnlp19c.pdf). 

The first dataset, `recipes`, contains 83,782 rows of recipes and 12 columns as follows:

|  **Column**       |  **Description** |
| --------------    |  -----------     |
|`name`	            |   Recipe name    |
|`id`               |   Recipe ID      |
|`minutes`          |   Minutes to prepare recipe   |
|`contributor_id`   |	User ID who submitted this recipe   |
|`submitted`        |	Date recipe was submitted   |
|`tags`	            |   Food.com tags for recipe    |
|`nutrition`        |	Nutrition information in the form [calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]; PDV stands for “percentage of daily value”   |
|`n_steps`          |	Number of steps in recipe   |
|`steps`            |	Text for recipe steps, in order |
|`description`      |	User-provided description   |

The second dataset, `interactions`, contains 731,927 rows of reviews and 5 columns as follows:

|**Column**  |	**Description**     |
| ---------  | -----------------    |
|`user_id `  |	User ID             |
|`recipe_id` |	Recipe ID           |
|`date`	     |  Date of interaction |
|`rating`    |	Rating given        |
|`review`    |	Review text         |

---

# Data Cleaning and Exploratory Data Analysis

In order to perform meaningful and relevant analysis, the first step of this project is to clean the datasets. We performed the following steps to prepare the dataset for analysis:
1. Left merge the `recipes` and `interactions` dataframes so each review is associated with its recipe.
2. Fill in all ratings of 0 in the `rating` column with `np.nan`. This is done because 1 is the lowest possible rating in our grading scale.
3. Groupby `id` and aggregate using `mean()` to obtain the average rating for each recipe, and merge this newly created series with our dataframe in a column called `average_rating`.
4. Since the `review` column does not have much use for this project, we drop it. Additionally, because after merging the average ratings, some recipes have multiple rows (e.g. impossible macaroni and cheese pie as displayed above). However, we only want to keep one row for each recipe. Hence, we drop recipes with multiple rows in the dataframe.
5. Create two new columns called `calories` and `protein` from the `nutrition` column.

Since we discovered that there are many outliers in the dataset, we decided to only keep recipes that meet these conditions:
- More than 0 and less than 2000 calories, as 2000 calories is the average daily caloric intake for an adult.
- More than 3 ingredients.
- More than 3 and less than 40 steps.

For the purpose of our analysis, we define a recipe has a high number of steps if it has 9 or more steps, based on the median for `n_steps`. Upon cleaning, here are the first 5 rows of the cleaned dataset.

| name                                  |     id |   minutes |   contributor_id | submitted   | tags                                                                                                                                                                                                                                                                                                                                    | nutrition                                    |   n_steps | steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | description                                                                                                                                                                                                                      | ingredients                                                                                                                            |   n_ingredients |   user_id |   recipe_id | date       | review                                                                                                                                                                                                                                                                                                                                                                                            |   average_rating |   calories |   protein | high_n_steps   |
|:--------------------------------------|-------:|----------:|-----------------:|:------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------|----------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------|----------------:|----------:|------------:|:-----------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------:|-----------:|----------:|:---------------|
| impossible macaroni and cheese pie    | 275022 |        50 |           531768 | 2008-01-01  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'main-dish', 'eggs-dairy', 'pasta', 'easy', 'cheese', 'dietary', 'high-calcium', 'high-in-something', 'pasta-rice-and-grains', 'elbow-macaroni']                                                                                                     | [386.1, 34.0, 7.0, 24.0, 41.0, 62.0, 8.0]    |        11 | ['heat oven to 400 degrees fahrenheit', 'grease a pie plate 10 x 1 1 / 2 inches', 'mix 2 cups cheese and the macaroni', 'sprinkle mixture in the plate', 'beat remaining ingredients , except the 1 / 4 cup cheese , until smooth , 15 seconds in a blender on high , or 1 minute with a hand beater', 'pour into plate', 'bake until knife inserted in center comes out clean - about 40 minutes', 'sprinkle with 1 / 4 cup cheese', 'bake until cheese is melted , 1 to 2 minutes', 'cool 10 minutes', 'serves 6 to 8 people']                                                     | one of my mom's favorite bisquick recipes. this brings back memories!                                                                                                                                                            | ['cheddar cheese', 'macaroni', 'milk', 'eggs', 'bisquick', 'salt', 'red pepper sauce']                                                 |               7 |    240552 |      275022 | 2008-04-07 | Easy comfort food! I definitely thought it was impossible, but it worked. :D  I used 6 egg whites in place of the eggs and skim milk.  It came out super fluffy.  Thanks, Wendy!                                                                                                                                                                                                                  |                3 |      386.1 |        41 | True           |
| impossible rhubarb pie                | 275024 |        55 |           531768 | 2008-01-01  | ['60-minutes-or-less', 'time-to-make', 'course', 'preparation', 'healthy', 'pies-and-tarts', 'desserts', 'pies', 'dietary']                                                                                                                                                                                                             | [377.1, 18.0, 208.0, 13.0, 13.0, 30.0, 20.0] |         6 | ['heat oven to 375 degrees', 'grease 10" pan , put rhubarb in pan', 'blend all remaining ingredients for 3 minutes', 'pour over rhubarb', 'let set for a few minutes', 'bake 40 to 45 minutes']                                                                                                                                                                                                                                                                                                                                                                                      | a childhood favorite of mine. my mom loved it because it cut down on how much time to make it.                                                                                                                                   | ['rhubarb', 'eggs', 'bisquick', 'butter', 'salt', 'sugar', 'vanilla', 'milk']                                                          |               8 |    171303 |      275024 | 2009-05-26 | When I found myself needing a dessert and having rhubarb on hand this recipe fit the bill.  I did however find it to be too overly sweet.  I would try it again, using less  sugar.  Thank you Starfire for sharing the recipe.                                                                                                                                                                   |                3 |      377.1 |        13 | False          |
| impossible seafood pie                | 275026 |        45 |           531768 | 2008-01-01  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'very-low-carbs', 'main-dish', 'eggs-dairy', 'seafood', 'crab', 'cheese', 'dietary', 'low-sodium', 'low-calorie', 'low-carb', 'low-in-something', 'shellfish']                                                                                       | [326.6, 30.0, 12.0, 27.0, 37.0, 51.0, 5.0]   |         7 | ['preheat oven to 400f', 'lightly grease large pie plate', 'mix crabmeat , cheeses and onion in pie plate', 'mix remaining ingredients in blender until smooth', 'slowly pour liquid mixture into pie plate', 'bake until golden brown for 35 to 40 minutes', 'let stand 5 minutes before cutting']                                                                                                                                                                                                                                                                                  | this is an oldie but a goodie. mom's stand by for company. good enough for us on a special occasion or if company came over!                                                                                                     | ['frozen crabmeat', 'sharp cheddar cheese', 'cream cheese', 'onion', 'milk', 'bisquick', 'eggs', 'salt', 'nutmeg']                     |               9 |    558429 |      275026 | 2013-09-21 | Sorry, this one didn&#039;t work out so well. I did make some modifications that may have affected the taste of the recipe. I used imitation crabmeat, egg substitute, and fat free half-and-half. Unfortunately the end result was very bland--it definitely could have used some more spice. I really wanted to like this one but I won&#039;t be making this again. Thanks for posting anyway. |                3 |      326.6 |        37 | False          |
| paula deen s caramel apple cheesecake | 275030 |        45 |           666723 | 2008-01-01  | ['60-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'desserts', 'cheesecake', 'gifts', 'taste-mood', 'sweet']                                                                                                                                                                                                   | [577.7, 53.0, 149.0, 19.0, 14.0, 67.0, 21.0] |        11 | ['preheat oven to 350f', 'reserve 3 / 4 cup apple filling , and set aside', 'spoon remaining apple filling into the crust', 'beat together in large bowl , cream cheese , sugar , vanilla , eggs', 'pour over pie filling', 'bake for 35 minutes', 'cool', 'meanwhile , mix reserved pie filling and caramel topping and heat for 1 minute in a small saucepan', 'spread warm topping evenly over cooked , cooled cheesecake', 'decorate entire edge of cake with the 12 pecan halves , and sprinkle middle of cheesecake with chopped pecans', 'refrigerate , share , and enjoy !'] | thank you paula deen!  hubby just happened to be watching with me one day when she made these and it will always be requested in our home!  it's very easy to make and such a fun twist on a plain cheesecake.  it's a must try! | ['apple pie filling', 'graham cracker crust', 'cream cheese', 'sugar', 'vanilla', 'eggs', 'caramel topping', 'pecan halves', 'pecans'] |               9 |    156891 |      275030 | 2008-01-18 | This was the first cheesecake I'd ever made.  It turned out great.  I substituted wheat free, gluten free spice cookies for the crust.  Thanks for this delicious recipe.                                                                                                                                                                                                                         |                5 |      577.7 |        14 | True           |
| midori poached pears                  | 275032 |        25 |           307114 | 2008-01-01  | ['lactose', '30-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'cuisine', 'preparation', 'occasion', 'south-west-pacific', 'desserts', 'fruit', 'australian', 'easy', 'beginner-cook', 'dinner-party', 'summer', 'dietary', 'gluten-free', 'seasonal', 'egg-free', 'free-of-something', 'pears', 'taste-mood', 'sweet'] | [386.9, 0.0, 347.0, 0.0, 1.0, 0.0, 33.0]     |         8 | ['bring midori , sugar , spices , rinds and water to the boil', 'simmer for 5 minutes', 'peel the pears and remove the base end but leave the stem intact', 'place pears in hot liquid and simmer for approximately 15mins or until cooked', 'cooking time depends on how ripe the pears are', 'place each pear on a dessert plate', 'top each pear with 2 tablespoons reserved poaching liquid', 'garnish with orange rind curls and mint sprigs']                                                                                                                                  | the green colour looks fabulous and the taste is heavenly. serve with a raspberry coulis. keep enough rind of the orange and lemon for garnish.                                                                                  | ['midori melon liqueur', 'water', 'caster sugar', 'cinnamon stick', 'vanilla pod', 'lemon rind', 'orange rind', 'pear', 'mint']        |               9 |    306797 |      275032 | 2008-03-21 | This needs at least 10 stars.  The recipe was easy to make & tasted magnificent.  I made a strawberry sauce that went wonderfully with it.  Thanks An_Net for sharing this keeper.                                                                                                                                                                                                                |                5 |      386.9 |         1 | False          |
